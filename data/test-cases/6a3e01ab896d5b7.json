{"uid":"6a3e01ab896d5b7","name":"Open deal new buy trade request","fullName":"tests.deals.test_deal_actions.TestDealActions#test_open_new_buy_trade_request","historyId":"8383274ee358a5839153a5ca7ad12a34","time":{"start":1728148776746,"stop":1728148822397,"duration":45651},"descriptionHtml":"<h4 style=\"margin: -10px 0 5px;\"><span style=\"margin: 9px 4px 9px 0; cursor: pointer\" class=\"fa fa-files-o\" data-copy=\"test_open_new_buy_trade_request\"></span>test_open_new_buy_trade_request</h4>\n    Collected at <span class=\"label label_status_passed\">2024-10-05 17:08</span><br><br>","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible","statusTrace":"self = <deals.test_deal_actions.TestDealActions object at 0x7f44b106d7f0>\npage = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\ncreate_session = <function create_session.<locals>._create_session at 0x7f44a0f55260>\n\n    @allure.title(\"Open deal new buy trade request\")\n    def test_open_new_buy_trade_request(self, page: Page, create_session):\n        deal_details_page = DealDetailsPage(page)\n        login_page = LoginPage(page)\n        notifications = Notifications(page)\n        deals_api = DealsApi()\n        failed_message = \"Available balance {}\"\n    \n        with allure.step(\"Test preparation\"):\n            running_deals = deals_api.get_poloniex_running_deals()\n            total_deals = running_deals['total']\n            deal_id = None\n    \n            if total_deals == 0:\n                pytest.skip(\"There are no deals in Running status\")\n    \n            for deal in running_deals['items']:\n                if deal['actions']['trade']:\n                    deal_id = deal['id']\n                    break\n    \n            if deal_id is None:\n                pytest.skip(\"There are no deals with 'trade' action available\")\n    \n            login_page.goto()\n            create_session()\n    \n        with allure.step(f\"Go to deals details page with id: {deal_id}\"):\n            deal_details_page.goto(endpoint=deal_details_page.slug.format(deal_id))\n    \n        with allure.step(\"Get available balance\"):\n            available_balance = deals_api.get_deal_available_balance(deal_id)\n    \n        with allure.step(\"Open new buy trade request\"):\n            deal_details_page.click_open_new_buy_btn()\n    \n        with allure.step(\"Verify deal start\"):\n            if float(available_balance) <= 10:\n>               assert notifications.wait_for_unsuccessful_toast() is True\n\navailable_balance = '0.98941465245105'\ncreate_session = <function create_session.<locals>._create_session at 0x7f44a0f55260>\ndeal       = {'actions': {'cancel': False, 'complete': True, 'restart': False, 'run': False, ...}, 'assessedValue': {'amount': '0.0192636355', 'asset': 'USDT'}, 'assets': {'base': 'OETH', 'quote': 'USDT'}, 'avgBuyRate': '2432.6753507014', ...}\ndeal_details_page = <src.pages.deal_details_page.deal_details_page.DealDetailsPage object at 0x7f449d1f8200>\ndeal_id    = '6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'\ndeals_api  = <src.api.deals.deals_api.DealsApi object at 0x7f449d1f9490>\nfailed_message = 'Available balance {}'\nlogin_page = <src.pages.login_page.login_page.LoginPage object at 0x7f449d1f9fa0>\nnotifications = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\npage       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\nrunning_deals = {'items': [{'actions': {'cancel': False, 'complete': False, 'restart': False, 'run': False, ...}, 'assessedValue': {'a...tadata': {'statistics': {'cancelled': 24, 'completed': 429, 'ready': 2227, 'running': 31}}, 'page': 1, 'pages': 3, ...}\nself       = <deals.test_deal_actions.TestDealActions object at 0x7f44b106d7f0>\ntotal_deals = 25\n\ntests/deals/test_deal_actions.py:179: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/pages/notifications.py:24: in wait_for_unsuccessful_toast\n    return self.wait_for_selector(self.locUnsuccessfulToast)\n        self       = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\nsrc/pages/base_page.py:45: in wait_for_selector\n    return self.page.wait_for_selector(locator).is_visible()\n        locator    = \"//div[@type='error']\"\n        self       = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py:7815: in wait_for_selector\n    self._sync(\n        selector   = \"//div[@type='error']\"\n        self       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_page.py:373: in wait_for_selector\n    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))\n        selector   = \"//div[@type='error']\"\n        self       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_frame.py:323: in wait_for_selector\n    await self._channel.send(\"waitForSelector\", locals_to_params(locals()))\n        selector   = \"//div[@type='error']\"\n        self       = <Frame name= url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n        method     = 'waitForSelector'\n        params     = {'selector': \"//div[@type='error']\"}\n        self       = <playwright._impl._connection.Channel object at 0x7f44a0bb7ad0>\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f44b0c5ec30>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f449d13a160>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nE           Call log:\nE           waiting for locator(\"//div[@type='error']\") to be visible\n\ncb         = <function Channel.send.<locals>.<lambda> at 0x7f449d13a160>\nis_internal = False\nparsed_st  = {'apiName': 'Page.wait_for_selector', 'frames': [{'column': 0, 'file': '/home/runner/work/qa-website/qa-website/src/pa...ython/3.12.6/x64/lib/python3.12/site-packages/_pytest/python.py', 'function': 'pytest_pyfunc_call', 'line': 159}, ...]}\nself       = <playwright._impl._connection.Connection object at 0x7f44b0c5ec30>\nst         = [FrameInfo(frame=<frame at 0x7f44a0bf60a0, file '/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/p...n func(*a, **kw)\\n'], index=0, positions=Positions(lineno=192, end_lineno=192, col_offset=23, end_col_offset=37)), ...]\ntask       = <Task finished name='Task-451' coro=<Page.wait_for_selector() done, defined at /opt/hostedtoolcache/Python/3.12.6/x64/...it_for_selector: Timeout 30000ms exceeded.\\nCall log:\\nwaiting for locator(\"//div[@type=\\'error\\']\") to be visible\\n')>\n\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py:513: TimeoutError","flaky":true,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"context","time":{"start":1728148776542,"stop":1728148776711,"duration":169},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"page","time":{"start":1728148776711,"stop":1728148776746,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_session","time":{"start":1728148776746,"stop":1728148776746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"descriptionHtml":"<h4 style=\"margin: -10px 0 5px;\"><span style=\"margin: 9px 4px 9px 0; cursor: pointer\" class=\"fa fa-files-o\" data-copy=\"test_open_new_buy_trade_request\"></span>test_open_new_buy_trade_request</h4>\n    Collected at <span class=\"label label_status_passed\">2024-10-05 17:08</span><br><br>","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible","statusTrace":"self = <deals.test_deal_actions.TestDealActions object at 0x7f44b106d7f0>\npage = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\ncreate_session = <function create_session.<locals>._create_session at 0x7f44a0f55260>\n\n    @allure.title(\"Open deal new buy trade request\")\n    def test_open_new_buy_trade_request(self, page: Page, create_session):\n        deal_details_page = DealDetailsPage(page)\n        login_page = LoginPage(page)\n        notifications = Notifications(page)\n        deals_api = DealsApi()\n        failed_message = \"Available balance {}\"\n    \n        with allure.step(\"Test preparation\"):\n            running_deals = deals_api.get_poloniex_running_deals()\n            total_deals = running_deals['total']\n            deal_id = None\n    \n            if total_deals == 0:\n                pytest.skip(\"There are no deals in Running status\")\n    \n            for deal in running_deals['items']:\n                if deal['actions']['trade']:\n                    deal_id = deal['id']\n                    break\n    \n            if deal_id is None:\n                pytest.skip(\"There are no deals with 'trade' action available\")\n    \n            login_page.goto()\n            create_session()\n    \n        with allure.step(f\"Go to deals details page with id: {deal_id}\"):\n            deal_details_page.goto(endpoint=deal_details_page.slug.format(deal_id))\n    \n        with allure.step(\"Get available balance\"):\n            available_balance = deals_api.get_deal_available_balance(deal_id)\n    \n        with allure.step(\"Open new buy trade request\"):\n            deal_details_page.click_open_new_buy_btn()\n    \n        with allure.step(\"Verify deal start\"):\n            if float(available_balance) <= 10:\n>               assert notifications.wait_for_unsuccessful_toast() is True\n\navailable_balance = '0.98941465245105'\ncreate_session = <function create_session.<locals>._create_session at 0x7f44a0f55260>\ndeal       = {'actions': {'cancel': False, 'complete': True, 'restart': False, 'run': False, ...}, 'assessedValue': {'amount': '0.0192636355', 'asset': 'USDT'}, 'assets': {'base': 'OETH', 'quote': 'USDT'}, 'avgBuyRate': '2432.6753507014', ...}\ndeal_details_page = <src.pages.deal_details_page.deal_details_page.DealDetailsPage object at 0x7f449d1f8200>\ndeal_id    = '6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'\ndeals_api  = <src.api.deals.deals_api.DealsApi object at 0x7f449d1f9490>\nfailed_message = 'Available balance {}'\nlogin_page = <src.pages.login_page.login_page.LoginPage object at 0x7f449d1f9fa0>\nnotifications = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\npage       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\nrunning_deals = {'items': [{'actions': {'cancel': False, 'complete': False, 'restart': False, 'run': False, ...}, 'assessedValue': {'a...tadata': {'statistics': {'cancelled': 24, 'completed': 429, 'ready': 2227, 'running': 31}}, 'page': 1, 'pages': 3, ...}\nself       = <deals.test_deal_actions.TestDealActions object at 0x7f44b106d7f0>\ntotal_deals = 25\n\ntests/deals/test_deal_actions.py:179: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/pages/notifications.py:24: in wait_for_unsuccessful_toast\n    return self.wait_for_selector(self.locUnsuccessfulToast)\n        self       = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\nsrc/pages/base_page.py:45: in wait_for_selector\n    return self.page.wait_for_selector(locator).is_visible()\n        locator    = \"//div[@type='error']\"\n        self       = <src.pages.notifications.Notifications object at 0x7f449d1f8ce0>\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py:7815: in wait_for_selector\n    self._sync(\n        selector   = \"//div[@type='error']\"\n        self       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_page.py:373: in wait_for_selector\n    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))\n        selector   = \"//div[@type='error']\"\n        self       = <Page url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_frame.py:323: in wait_for_selector\n    await self._channel.send(\"waitForSelector\", locals_to_params(locals()))\n        selector   = \"//div[@type='error']\"\n        self       = <Frame name= url='https://darkbot:98713456@dev.app.darkbot.io/deals/6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'>\n        state      = None\n        strict     = None\n        timeout    = None\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n        method     = 'waitForSelector'\n        params     = {'selector': \"//div[@type='error']\"}\n        self       = <playwright._impl._connection.Channel object at 0x7f44a0bb7ad0>\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f44b0c5ec30>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f449d13a160>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nE           Call log:\nE           waiting for locator(\"//div[@type='error']\") to be visible\n\ncb         = <function Channel.send.<locals>.<lambda> at 0x7f449d13a160>\nis_internal = False\nparsed_st  = {'apiName': 'Page.wait_for_selector', 'frames': [{'column': 0, 'file': '/home/runner/work/qa-website/qa-website/src/pa...ython/3.12.6/x64/lib/python3.12/site-packages/_pytest/python.py', 'function': 'pytest_pyfunc_call', 'line': 159}, ...]}\nself       = <playwright._impl._connection.Connection object at 0x7f44b0c5ec30>\nst         = [FrameInfo(frame=<frame at 0x7f44a0bf60a0, file '/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/p...n func(*a, **kw)\\n'], index=0, positions=Positions(lineno=192, end_lineno=192, col_offset=23, end_col_offset=37)), ...]\ntask       = <Task finished name='Task-451' coro=<Page.wait_for_selector() done, defined at /opt/hostedtoolcache/Python/3.12.6/x64/...it_for_selector: Timeout 30000ms exceeded.\\nCall log:\\nwaiting for locator(\"//div[@type=\\'error\\']\") to be visible\\n')>\n\n/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py:513: TimeoutError","steps":[{"name":"Test preparation","time":{"start":1728148778319,"stop":1728148784969,"duration":6650},"status":"passed","steps":[{"name":"goto route","time":{"start":1728148780244,"stop":1728148781513,"duration":1269},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Go to deals details page with id: 6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88","time":{"start":1728148784969,"stop":1728148785797,"duration":828},"status":"passed","steps":[{"name":"goto route","time":{"start":1728148784969,"stop":1728148785797,"duration":828},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Get available balance","time":{"start":1728148785797,"stop":1728148790519,"duration":4722},"status":"passed","steps":[{"name":"Get available deal balance","time":{"start":1728148785799,"stop":1728148790519,"duration":4720},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"deal_id","value":"'6c7b83e3-0c07-4bb3-a3f4-b6b6ca2bdf88'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Open new buy trade request","time":{"start":1728148790519,"stop":1728148792391,"duration":1872},"status":"passed","steps":[{"name":"Click on open new buy trade request btn","time":{"start":1728148790519,"stop":1728148792391,"duration":1872},"status":"passed","steps":[{"name":"click button","time":{"start":1728148790519,"stop":1728148792391,"duration":1872},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"locator","value":"'//*[text()='Open new BUY']'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Verify deal start","time":{"start":1728148792391,"stop":1728148822396,"duration":30005},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible\n\n","statusTrace":"  File \"/home/runner/work/qa-website/qa-website/tests/deals/test_deal_actions.py\", line 179, in test_open_new_buy_trade_request\n    assert notifications.wait_for_unsuccessful_toast() is True\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/qa-website/qa-website/src/pages/notifications.py\", line 24, in wait_for_unsuccessful_toast\n    return self.wait_for_selector(self.locUnsuccessfulToast)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/qa-website/qa-website/src/pages/base_page.py\", line 45, in wait_for_selector\n    return self.page.wait_for_selector(locator).is_visible()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 7815, in wait_for_selector\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 373, in wait_for_selector\n    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 323, in wait_for_selector\n    await self._channel.send(\"waitForSelector\", locals_to_params(locals()))\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 513, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Wait for unsuccessful toast notification","time":{"start":1728148792391,"stop":1728148822396,"duration":30005},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible\n\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/qa-website/qa-website/src/pages/notifications.py\", line 24, in wait_for_unsuccessful_toast\n    return self.wait_for_selector(self.locUnsuccessfulToast)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/qa-website/qa-website/src/pages/base_page.py\", line 45, in wait_for_selector\n    return self.page.wait_for_selector(locator).is_visible()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 7815, in wait_for_selector\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 373, in wait_for_selector\n    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 323, in wait_for_selector\n    await self._channel.send(\"waitForSelector\", locals_to_params(locals()))\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 513, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"wait for selector","time":{"start":1728148792392,"stop":1728148822395,"duration":30003},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible\n\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/qa-website/qa-website/src/pages/base_page.py\", line 45, in wait_for_selector\n    return self.page.wait_for_selector(locator).is_visible()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 7815, in wait_for_selector\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 373, in wait_for_selector\n    return await self._main_frame.wait_for_selector(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 323, in wait_for_selector\n    await self._channel.send(\"waitForSelector\", locals_to_params(locals()))\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.6/x64/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 513, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[{"name":"locator","value":"'//div[@type='error']'"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"e40712feca8f9d79","name":"Location","source":"e40712feca8f9d79.uri","type":"text/uri-list","size":86},{"uid":"a3b6933db63eda35","name":"Screenshot","source":"a3b6933db63eda35.png","type":"image/png","size":163653},{"uid":"b8ba8c06141fe528","name":"log","source":"b8ba8c06141fe528.txt","type":"text/plain","size":2013}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":3,"hasContent":true},"afterStages":[{"name":"context::0","time":{"start":1728148822693,"stop":1728148822750,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"suite","value":"Deal Actions"},{"name":"parentSuite","value":"tests.deals"},{"name":"subSuite","value":"TestDealActions"},{"name":"host","value":"fv-az1052-613"},{"name":"thread","value":"5486-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.deals.test_deal_actions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ecc85b1d40314255","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Page.wait_for_selector: Timeout 30000ms exceeded.\nCall log:\nwaiting for locator(\"//div[@type='error']\") to be visible","time":{"start":1728148729707,"stop":1728148776215,"duration":46508}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":3,"skipped":0,"passed":2,"unknown":0,"total":6},"items":[{"uid":"20cfd96dd4ef4764","reportUrl":"https://darkbot-io.github.io/qa-website/534//#testresult/20cfd96dd4ef4764","status":"passed","time":{"start":1727543692940,"stop":1727543713349,"duration":20409}},{"uid":"c2da6ceb75b89749","reportUrl":"https://darkbot-io.github.io/qa-website/533//#testresult/c2da6ceb75b89749","status":"failed","statusDetails":"AssertionError: assert 'Available balance 0.397' in 'Available balance 0.4312791421 TRX is not enough to open buy order on market FUND-TRX with amount 2.004 TRX and quantity 6.5834428383706 FUND'\n +  where 'Available balance 0.397' = <built-in method format of str object at 0x7f05432a8770>('0.397')\n +    where <built-in method format of str object at 0x7f05432a8770> = 'Available balance {}'.format\n +  and   'Available balance 0.4312791421 TRX is not enough to open buy order on market FUND-TRX with amount 2.004 TRX and quantity 6.5834428383706 FUND' = get_unsuccessful_toast_message()\n +    where get_unsuccessful_toast_message = <src.pages.notifications.Notifications object at 0x7f05303de1b0>.get_unsuccessful_toast_message","time":{"start":1727271522981,"stop":1727271542145,"duration":19164}},{"uid":"2db57936224cf25a","reportUrl":"https://darkbot-io.github.io/qa-website/532//#testresult/2db57936224cf25a","status":"broken","statusDetails":"requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://dev.api.darkbot.io/auth/login","time":{"start":1726945025630,"stop":1726945026294,"duration":664}},{"uid":"bbdd7f0d8f258247","reportUrl":"https://darkbot-io.github.io/qa-website/531//#testresult/bbdd7f0d8f258247","status":"broken","statusDetails":"requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://dev.api.darkbot.io/auth/login","time":{"start":1726943327772,"stop":1726943328523,"duration":751}},{"uid":"7f8514418b63f373","reportUrl":"https://darkbot-io.github.io/qa-website/529//#testresult/7f8514418b63f373","status":"passed","time":{"start":1726772776658,"stop":1726772795624,"duration":18966}}]},"tags":[]},"source":"6a3e01ab896d5b7.json","parameterValues":[]}